// Join - only listening for 1- and 2-tuples

  x!!(1,1,1) | x!(2,2,2) | y!("b") | y!("a") | z!(true) | z!(false) | for( a1,b1,e1 <- x ; c1 <- y ; d1 <- z ){ ( *a1 , *b1 , *c1 , *d1 , *e1 ) } | for( a2,b2,e2 <= x ; c2 <= y ; d2 <= z ){ [*a2 , *b2 , *c2 , *d2 , *e2 ] }
  
/*
  Output:
$ kompile join.k --backend java --transition "matched initialize"
$ krun tests/comm.join --search-final

  Result ==K <T>
    <threads>
      <thread>
        <k>
          ( 1 , 1 , "b" , true , 1 )
        </k>
      </thread> <thread>
        <k>
          [ 2 , 2 , "a" , false , 2 ]
        </k>
      </thread>
    </threads>
    <tuplespace>
      <sends>
        <send>
          <schan>
            x
          </schan>
          <msg>
            1 , 1 , 1
          </msg>
          <tuple>
            3
          </tuple>
          <stype>
            1
          </stype>
          <sid>
            48
          </sid>
          <mlid>
            .Set
          </mlid>
        </send>
      </sends>
      <receives>
        <rec>
          <id>
            57
          </id>
          <length>
            3
          </length>
          <cont>
            [ * a2 , * b2 , * c2 , * d2 , * e2 ]
          </cont>
          <state>
            ""
          </state>
          <match>
            0
          </match>
          <type>
            1
          </type>
          <nomo>
            SetItem ( 22 )
            SetItem ( 37 )
          </nomo>
          <listens>
            <listen>
              <chan>
                x
              </chan>
              <vars>
                a2 , b2 , e2
              </vars>
              <num>
                3
              </num>
              <lid>
                59
              </lid>
              <msid>
                ""
              </msid>
            </listen> <listen>
              <chan>
                y
              </chan>
              <vars>
                c2
              </vars>
              <num>
                1
              </num>
              <lid>
                61
              </lid>
              <msid>
                ""
              </msid>
            </listen> <listen>
              <chan>
                z
              </chan>
              <vars>
                d2
              </vars>
              <num>
                1
              </num>
              <lid>
                63
              </lid>
              <msid>
                ""
              </msid>
            </listen>
          </listens>
        </rec>
      </receives>
    </tuplespace>
    <reaction>
      <who>
        .
      </who>
      <what>
        .
      </what>
      <where>
        .
      </where>
      <rid>
        .
      </rid>
      <rnum>
        .
      </rnum>
      <react>
        .
      </react>
      <forg>
        .
      </forg>
    </reaction>
  </T>
#Or
  Result ==K <T>
    <threads>
      <thread>
        <k>
          ( 1 , 1 , "b" , true , 1 )
        </k>
      </thread> <thread>
        <k>
          [ 2 , 2 , "a" , false , 2 ]
        </k>
      </thread>
    </threads>
    <tuplespace>
      <sends>
        <send>
          <schan>
            x
          </schan>
          <msg>
            1 , 1 , 1
          </msg>
          <tuple>
            3
          </tuple>
          <stype>
            1
          </stype>
          <sid>
            48
          </sid>
          <mlid>
            .Set
          </mlid>
        </send>
      </sends>
      <receives>
        <rec>
          <id>
            57
          </id>
          <length>
            3
          </length>
          <cont>
            [ * a2 , * b2 , * c2 , * d2 , * e2 ]
          </cont>
          <state>
            ""
          </state>
          <match>
            0
          </match>
          <type>
            1
          </type>
          <nomo>
            SetItem ( 22 )
            SetItem ( 37 )
          </nomo>
          <listens>
            <listen>
              <chan>
                x
              </chan>
              <vars>
                a2 , b2 , e2
              </vars>
              <num>
                3
              </num>
              <lid>
                59
              </lid>
              <msid>
                ""
              </msid>
            </listen> <listen>
              <chan>
                y
              </chan>
              <vars>
                c2
              </vars>
              <num>
                1
              </num>
              <lid>
                61
              </lid>
              <msid>
                ""
              </msid>
            </listen> <listen>
              <chan>
                z
              </chan>
              <vars>
                d2
              </vars>
              <num>
                1
              </num>
              <lid>
                63
              </lid>
              <msid>
                ""
              </msid>
            </listen>
          </listens>
        </rec>
      </receives>
    </tuplespace>
    <reaction>
      <who>
        .
      </who>
      <what>
        .
      </what>
      <where>
        .
      </where>
      <rid>
        .
      </rid>
      <rnum>
        .
      </rnum>
      <react>
        .
      </react>
      <forg>
        .
      </forg>
    </reaction>
  </T>
#Or
  Result ==K <T>
    <threads>
      <thread>
        <k>
          ( 2 , 2 , "b" , true , 2 )
        </k>
      </thread>
    </threads>
    <tuplespace>
      <sends>
        <send>
          <schan>
            x
          </schan>
          <msg>
            1 , 1 , 1
          </msg>
          <tuple>
            3
          </tuple>
          <stype>
            1
          </stype>
          <sid>
            48
          </sid>
          <mlid>
            .Set
          </mlid>
        </send> <send>
          <schan>
            y
          </schan>
          <msg>
            "a"
          </msg>
          <tuple>
            1
          </tuple>
          <stype>
            0
          </stype>
          <sid>
            43
          </sid>
          <mlid>
            SetItem ( 61 )
          </mlid>
        </send> <send>
          <schan>
            z
          </schan>
          <msg>
            false
          </msg>
          <tuple>
            1
          </tuple>
          <stype>
            0
          </stype>
          <sid>
            52
          </sid>
          <mlid>
            SetItem ( 63 )
          </mlid>
        </send>
      </sends>
      <receives>
        <rec>
          <id>
            57
          </id>
          <length>
            3
          </length>
          <cont>
            [ * a2 , * b2 , * c2 , * d2 , * e2 ]
          </cont>
          <state>
            ""
          </state>
          <match>
            2
          </match>
          <type>
            1
          </type>
          <nomo>
            SetItem ( 30 )
            SetItem ( 43 )
            SetItem ( 52 )
          </nomo>
          <listens>
            <listen>
              <chan>
                x
              </chan>
              <vars>
                a2 , b2 , e2
              </vars>
              <num>
                3
              </num>
              <lid>
                59
              </lid>
              <msid>
                ""
              </msid>
            </listen> <listen>
              <chan>
                y
              </chan>
              <vars>
                c2
              </vars>
              <num>
                1
              </num>
              <lid>
                61
              </lid>
              <msid>
                43
              </msid>
            </listen> <listen>
              <chan>
                z
              </chan>
              <vars>
                d2
              </vars>
              <num>
                1
              </num>
              <lid>
                63
              </lid>
              <msid>
                52
              </msid>
            </listen>
          </listens>
        </rec>
      </receives>
    </tuplespace>
    <reaction>
      <who>
        .
      </who>
      <what>
        .
      </what>
      <where>
        .
      </where>
      <rid>
        .
      </rid>
      <rnum>
        .
      </rnum>
      <react>
        .
      </react>
      <forg>
        .
      </forg>
    </reaction>
  </T>
*/